!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(30),i=n(17),s=n(28),c=n(29),a={create:function(e){i.debug=e.debug||!1,i.enabled=e.enabled||!0;var t={Tracker:i,tracker:new i({projectId:e.projectId,writeKey:e.writeKey}),cookie:i.utils.cookie("keen"),data:{},onloadCallbacks:e.onloadCallbacks||[]};return o(t,this),t._init(),t},onload:function(e){this.onloadCallbacks.push(e)},loaded:function(){this.onloadCallbacks.forEach(function(e){e()})},_init:function(){this._buildDataModel(),this._trackPageview(),this._bindClickEvents(),this._bindFormSubmissionEvents()},_buildDataModel:function(){this.data={keen:{addons:c},tracked_by:r.name+"-"+r.version,local_time_full:this._getLocalDateTime(),ip_address:"${keen.ip}",user_agent:"${keen.user_agent}",url:{full:this._getPageHref()},referrer:{full:this._getDocumentReferrer()},user:{uuid:this._getUUID()},page:{title:this._getDocumentTitle(),description:this._getDocumentDescription()},tech:{profile:i.helpers.getBrowserProfile()}}},_trackPageview:function(){this.tracker.recordEvent("pageviews",this.data)},_trackClick:function(e){var t={element:{id:e.target.id,class:e.target.class,text:e.target.text,href:e.target.href,type:e.target.type,node_name:e.target.nodeName,selector:i.helpers.getDomNodePath(e.target),x_position:e.target.offsetLeft||e.target.clientLeft,y_position:e.target.offsetTop||e.target.clientTop},local_time_full:this._getLocalDateTime()};this.tracker.recordEvent("clicks",o({},this.data,t))},_trackFormSubmission:function(e){var t=e.target,n={form:{action:t.action,method:t.method,fields:this._serializeFormFields(t)},element:{id:t.id,class:t.class,selector:i.helpers.getDomNodePath(t),x_position:t.offsetLeft||t.clientLeft,y_position:t.offsetTop||t.clientTop},local_time_full:this._getLocalDateTime()};this.tracker.recordEvent("form_submissions",o({},this.data,n))},_serializeFormFields:function(e){return s(e,{hash:!0})},_bindClickEvents:function(){var e=Keen.utils.listener("*");e.on("click",this._trackClick.bind(this))},_bindFormSubmissionEvents:function(){var e=Keen.utils.listener("form");e.on("submit",this._trackFormSubmission.bind(this))},_getUUID:function(){var e=this.cookie.get("uuid");return this.cookie.get("uuid")?e:(e=i.helpers.getUniqueId(),this.cookie.set("uuid",e),e)},_getPageHref:function(){return window.location.href},_getDocumentDescription:function(){var e=document.querySelectorAll('meta[name="description"]');return e.length?e[0].content:""},_getDocumentTitle:function(){return document.title},_getDocumentReferrer:function(){return document.referrer},_getLocalDateTime:function(){return new Date}};e.exports=a,window.KeenWebAutoCollector=a},function(e,t,n){"use strict";e.exports=n(4)},function(e,t,n){"use strict";e.exports=n(5)},function(e,t,n){"use strict";function o(e){if(e)return r(e)}function r(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o,r=0;r<n.length;r++)if(o=n[r],o===t||o.fn===t){n.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var o=0,r=n.length;o<r;++o)n[o].apply(this,t)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){"use strict";function n(e,t,n){var o;if(!e)return 0;if(n=n?n:e,e instanceof Array){for(o=0;o<e.length;o++)if(t.call(n,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&t.call(n,e[o],o,e)===!1)return 0;return 1}e.exports=n},function(e,t){"use strict";function n(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}e.exports=n},function(e,t,n){"use strict";function o(e,t){return 2!==arguments.length||"string"!=typeof e||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?void i.call(this,"Incorrect arguments provided to #extendEvent method"):(this.extensions.collections[e]=this.extensions.collections[e]||[],this.extensions.collections[e].push(t),this.emit("extendEvent",e,t),this)}function r(e){return 1!==arguments.length||"object"!==("undefined"==typeof e?"undefined":c(e))&&"function"!=typeof e?void i.call(this,"Incorrect arguments provided to #extendEvents method"):(this.extensions.events.push(e),this.emit("extendEvents",e),this)}function i(e){var t="Event(s) not extended: "+e;this.emit("error",t)}function s(e,t){return t&&t.length>0&&u(t,function(t,n){var o="function"==typeof t?t():t;a(e,o)}),e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(10),u=n(1);e.exports={extendEvent:o,extendEvents:r,getExtendedEventBody:s}},function(e,t,n){"use strict";var o=n(13),r=(n(1),n(2),n(11));o.helpers=o.helpers||{},o.on("client",function(e){e.extensions={events:[],collections:{}},e.queue=r(),e.queue.on("flush",function(){e.recordDeferredEvents()})}),o.prototype.writeKey=function(e){return arguments.length?(this.config.writeKey=e?String(e):null,this):this.config.writeKey},o.prototype.setGlobalProperties=function(e){return o.log("This method has been deprecated. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events"),e&&"function"==typeof e?(this.config.globalProperties=e,this):void this.emit("error","Invalid value for global properties: "+e)},e.exports=o},function(e,t){"use strict";function n(){var e,t;if("undefined"==typeof window||!window.screen)return{};e=["height","width","colorDepth","pixelDepth","availHeight","availWidth"],t={};for(var n=0;n<e.length;n++)t[e[n]]=window.screen[e[n]]?window.screen[e[n]]:null;return t.orientation={angle:window.screen.orientation?window.screen.orientation.angle:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"},t}e.exports=n},function(e,t){"use strict";function n(){var e,t,n;return"undefined"==typeof document?{}:(e=document.body,t=document.documentElement,n={height:"innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,width:"innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth,scrollHeight:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)||null},window.screen&&(n.ratio={height:window.screen.availHeight?parseFloat((window.innerHeight/window.screen.availHeight).toFixed(2)):null,width:window.screen.availWidth?parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2)):null}),n)}e.exports=n},function(e,t){"use strict";function n(e){for(var t=1;t<arguments.length;t++)if(e instanceof Array&&arguments[t]instanceof Array)for(var i=0;i<arguments[t].length;i++)e.indexOf(arguments[t][i])<0&&e.push(arguments[t][i]);else for(var s in arguments[t])"undefined"!=typeof e[s]&&"object"===r(arguments[t][s])&&null!==arguments[t][s]?n(e[s],o(arguments[t][s])):void 0!==arguments[t][s]&&(e[s]=o(arguments[t][s]));return e}function o(e){return JSON.parse(JSON.stringify(e))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n},function(e,t,n){"use strict";function o(){var e=this;return this instanceof o==!1?new o:(e.capacity=0,e.interval=0,e.config={capacity:5e3,interval:15},e.events={},setInterval(function(){e.interval++,r.call(e)},1e3),e)}function r(){(this.capacity>0&&this.interval>=this.config.interval||this.capacity>=this.config.capacity)&&(this.emit("flush"),this.interval=0)}var i=n(3);e.exports=o,i(o.prototype)},function(e,t,n){var o,r;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
	 * JavaScript Cookie v2.1.0
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */
!function(i){o=i,r="function"==typeof o?o.call(t,n,t,e):o,!(void 0!==r&&(e.exports=r))}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(n){function o(t,r,i){var s;if(arguments.length>1){if(i=e({path:"/"},o.defaults,i),"number"==typeof i.expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*i.expires),i.expires=c}try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(e){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(s={});for(var a=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,l=0;l<a.length;l++){var f=a[l].split("="),d=f[0].replace(u,decodeURIComponent),p=f.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=n.read?n.read(p,d):n(p,d)||p.replace(u,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===d){s=p;break}t||(s[d]=p)}catch(e){}}return s}return o.get=o.set=o,o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}return t(function(){})})},function(e,t,n){(function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(t){function r(e){return this instanceof r==!1?new r(e):(this.configure(e),r.debug&&this.on("error",r.log),this.emit("ready"),void r.emit("client",this))}function i(e){return r.loaded||"undefined"==typeof document?void e():(null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),document.readyState="complete"},!1),document.readyState="loading"),void s(e))}function s(e){/in/.test(document.readyState)?setTimeout(function(){s(e)},9):e()}function c(e){return"undefined"!=typeof e}var a=t.Keen||void 0,u=n(4),l=n(5),f=n(15),d=n(16),p=n(3);a&&"undefined"==typeof a.resources&&(r.legacyVersion=a),p(r),p(r.prototype),l(r,{debug:!1,enabled:!0,loaded:!1,version:"__VERSION__"}),r.helpers=r.helpers||{},r.resources=r.resources||{},l(r.resources,{base:"{protocol}://{host}",version:"{protocol}://{host}/3.0",projects:"{protocol}://{host}/3.0/projects",projectId:"{protocol}://{host}/3.0/projects/{projectId}",events:"{protocol}://{host}/3.0/projects/{projectId}/events",queries:"{protocol}://{host}/3.0/projects/{projectId}/queries"}),r.utils=r.utils||{},l(r.utils,{each:u,extend:l,parseParams:f,serialize:d}),r.extendLibrary=function(e,t){var n=a||t;return c(n)&&c(n.resources)&&(u(n,function(t,n){"object"===("undefined"==typeof t?"undefined":o(t))?(e[n]=e[n]||{},l(e[n],t)):e[n]=e[n]||t}),l(e.prototype,n.prototype)),e},r.log=function(e){r.debug&&"object"===("undefined"==typeof console?"undefined":o(console))&&console.log("[Keen]",e)},r.noConflict=function(){return"undefined"!=typeof t.Keen&&(t.Keen=r.legacyVersion||a),r},r.ready=function(e){r.loaded?e():r.once("ready",e)},r.prototype.configure=function(e){var t=e||{};return this.config=this.config||{projectId:void 0,writeKey:void 0,host:"api.keen.io",protocol:"https",requestType:"jsonp",resources:l({},r.resources)},"undefined"!=typeof window&&window.navigator.userAgent.indexOf("MSIE")>-1&&(t.protocol=document.location.protocol.replace(":","")),t.host&&t.host.replace(/.*?:\/\//g,""),l(this.config,t),this},r.prototype.masterKey=function(e){return arguments.length?(this.config.masterKey=e?String(e):null,this):this.config.masterKey},r.prototype.projectId=function(e){return arguments.length?(this.config.projectId=e?String(e):null,this):this.config.projectId},r.prototype.resources=function(e){if(!arguments.length)return this.config.resources;var t=this;return"object"===("undefined"==typeof e?"undefined":o(e))&&u(e,function(e,n){t.config.resources[n]=e?e:null}),t},r.prototype.url=function(e){var t,n=Array.prototype.slice.call(arguments,1),r=this.config.resources.base||"{protocol}://{host}";return t=e&&"string"==typeof e?this.config.resources[e]?this.config.resources[e]:r+e:r,u(this.config,function(e,n){"object"!==("undefined"==typeof e?"undefined":o(e))&&(t=t.replace("{"+n+"}",e))}),u(n,function(e,n){"string"==typeof e?t+="/"+e:"object"===("undefined"==typeof e?"undefined":o(e))&&(t+="?",u(e,function(e,n){t+=n+"="+e+"&"}),t=t.slice(0,-1))}),t},i(function(){r.loaded=!0,r.emit("ready")}),e.exports=r}).call(void 0,"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{})}).call(t,function(){return this}())},function(e,t){"use strict";e.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,o,r,i,s,c,a="",u=0,l=this.map;for(e=this.utf8.encode(e);u<e.length;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),o=e.charCodeAt(u++),r=t>>2,i=(3&t)<<4|n>>4,s=isNaN(n)?64:(15&n)<<2|o>>6,c=isNaN(n)||isNaN(o)?64:63&o,a=a+l.charAt(r)+l.charAt(i)+l.charAt(s)+l.charAt(c);return a},decode:function(e){var t,n,o,r,i,s,c,a="",u=0,l=this.map,f=String.fromCharCode;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=l.indexOf(e.charAt(u++)),n=l.indexOf(e.charAt(u++)),o=l.indexOf(e.charAt(u++)),r=l.indexOf(e.charAt(u++)),i=t<<2|n>>4,s=(15&n)<<4|o>>2,c=(3&o)<<6|r,a=a+(f(i)+(64!=o?f(s):""))+(64!=r?f(c):"");return this.utf8.decode(a)},utf8:{encode:function(e){for(var t,n="",o=0,r=String.fromCharCode;o<e.length;)t=e.charCodeAt(o++),n+=t<128?r(t):t>127&&t<2048?r(t>>6|192)+r(63&t|128):r(t>>12|224)+r(t>>6&63|128)+r(63&t|128);return n},decode:function(e){for(var t,n,o="",r=0,i=String.fromCharCode;r<e.length;)n=e.charCodeAt(r),o+=n<128?[i(n),r++][0]:n>191&&n<224?[i((31&n)<<6|63&(t=e.charCodeAt(r+1))),r+=2][0]:[i((15&n)<<12|(63&(t=e.charCodeAt(r+1)))<<6|63&(c3=e.charCodeAt(r+2))),r+=3][0];return o}}}},function(e,t){"use strict";function n(e){for(var t,n={},o=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(o," "))},s=e.split("?")[1];t=r.exec(s);)n[i(t[1])]=i(t[2]);return n}e.exports=n},function(e,t,n){"use strict";function o(e){var t=[];return r(e,function(e,n){"string"!=typeof e&&(e=JSON.stringify(e)),t.push(n+"="+encodeURIComponent(e))}),t.join("&")}var r=n(4);n(5);e.exports=o},function(e,t,n){var o,r;(function(i){"use strict";(function(i){function s(e,t,n,o,r){this.emit("error","This method has been deprecated. Check out DOM listeners: https://github.com/keen/keen-tracking.js#listeners");var i,s,c=e,a=c.currentTarget?c.currentTarget:c.srcElement||c.target,u=o||500,l=!1,f="";if(void 0!==a.getAttribute?f=a.getAttribute("target"):a.target&&(f=a.target),"_blank"!=f&&"blank"!=f||c.metaKey||(s=window.open("about:blank"),s.document.location=a.href),"A"===a.nodeName?i=function(){l||c.metaKey||"_blank"===f||"blank"===f||(l=!0,window.location=a.href)}:"FORM"===a.nodeName?i=function(){l||(l=!0,a.submit())}:this.trigger("error","#trackExternalLink method not attached to an <a> or <form> DOM element"),r&&(i=function(){l||(l=!0,r())}),this.recordEvent(t,n,i),setTimeout(i,u),!c.metaKey)return!1}var c=n(7),a=n(1),u=n(2),l=n(26)(c);u(c.prototype,n(23)),u(c.prototype,n(18)),u(c.prototype,{extendEvent:n(6).extendEvent,extendEvents:n(6).extendEvents}),c.prototype.trackExternalLink=s,u(c.helpers,{getBrowserProfile:n(19),getDatetimeIndex:n(20),getDomNodePath:n(21),getScreenProfile:n(8),getUniqueId:n(22),getWindowProfile:n(9)}),u(c.utils,{cookie:n(25),deepExtend:n(10),listener:l,timer:n(27)}),c.listenTo=function(e){a(e,function(e,t){var n=t.split(" "),o=n[0],r=n.slice(1,n.length).join(" ");return l(r).on(o,e)})},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),"undefined"!=typeof e&&e.exports&&(e.exports=c),o=[],r=function(){return c}.apply(t,o),!(void 0!==r&&(e.exports=r)),i.Keen=c.extendLibrary(c)}).call(void 0,"undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:{})}).call(t,function(){return this}())},function(e,t,n){"use strict";function o(e,t){return 2!==arguments.length||"string"!=typeof e?void a.call(this,"Incorrect arguments provided to #deferEvent method"):(this.queue.events[e]=this.queue.events[e]||[],this.queue.events[e].push(t),this.queue.capacity++,this.emit("deferEvent",e,t),this)}function r(e){var t=this;return 1!==arguments.length||"object"!==("undefined"==typeof e?"undefined":u(e))?void a.call(this,"Incorrect arguments provided to #deferEvents method"):(l(e,function(e,n){t.queue.events[n]=t.queue.events[n]||[],t.queue.events[n]=t.queue.events[n].concat(e),t.queue.capacity=t.queue.capacity+e.length}),t.emit("deferEvents",e),t)}function i(e){return arguments.length?(this.queue.config.capacity=e?Number(e):0,this):this.queue.config.capacity}function s(e){return arguments.length?(this.queue.config.interval=e?Number(e):0,this):this.queue.config.interval}function c(){var e,t=this;return t.queue.capacity>0&&(e=JSON.parse(JSON.stringify(t.queue)),t.queue=f(),t.queue.options=e.options,t.emit("recordDeferredEvents",e.events),t.recordEvents(e.events,function(n,o){n?t.recordEvents(e.events):e=void 0})),t}function a(e){var t="Event(s) not deferred: "+e;this.emit("error",t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(n(7),n(1)),f=n(11);e.exports={deferEvent:o,deferEvents:r,queueCapacity:i,queueInterval:s,recordDeferredEvents:c}},function(e,t,n){"use strict";function o(){return{cookies:"undefined"!=typeof navigator.cookieEnabled&&navigator.cookieEnabled,codeName:navigator.appCodeName,language:navigator.language,name:navigator.appName,online:navigator.onLine,platform:navigator.platform,useragent:navigator.userAgent,version:navigator.appVersion,screen:r(),window:i()}}var r=n(8),i=n(9);e.exports=o},function(e,t){"use strict";function n(e){var t=e||new Date;return{hour_of_day:t.getHours(),day_of_week:parseInt(1+t.getDay()),day_of_month:t.getDate(),month:parseInt(1+t.getMonth()),year:t.getFullYear()}}e.exports=n},function(e,t){"use strict";function n(e){if(!e.nodeName)return"";for(var t=[];null!=e.parentNode;){for(var n=0,o=0,r=0;r<e.parentNode.childNodes.length;r++){var i=e.parentNode.childNodes[r];i.nodeName==e.nodeName&&(i===e&&(o=n),n++)}e.hasAttribute("id")&&""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):n>1?t.unshift(e.nodeName.toLowerCase()+":eq("+o+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t.slice(1).join(" > ")}e.exports=n},function(e,t){"use strict";function n(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e.replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}e.exports=n},function(e,t,n){"use strict";function o(e,t,n,o){var r,i,s,p,m,b,k;if(r=this.url("events",encodeURIComponent(e)),i={},s=n,k="boolean"!=typeof o||o,c.call(this,s)){if(!e||"string"!=typeof e)return void a.call(this,"Collection name must be a string.",s);if(this.config.globalProperties&&(i=this.config.globalProperties(e)),x(i,t),b={},w.getExtendedEventBody(b,this.extensions.events),w.getExtendedEventBody(b,this.extensions.collections[e]),w.getExtendedEventBody(b,[i]),this.emit("recordEvent",e,b),!g.enabled)return a.call(this,"Keen.enabled is set to false.",s),!1;if(p=this.url("events",encodeURIComponent(e),{api_key:this.writeKey(),data:encodeURIComponent(v.encode(JSON.stringify(b))),modified:(new Date).getTime()}),m=p.length<u(),k)switch(this.config.requestType){case"xhr":f.call(this,"POST",r,b,s);break;case"beacon":m?y.call(this,p,s):l.call(this,r,b,"Beacon URL length exceeds current browser limit, and XHR is not supported.",s);break;default:m?h.call(this,p,s):l.call(this,r,b,"JSONp URL length exceeds current browser limit, and XHR is not supported.",s)}else m&&d(p);return n=s=null,this}}function r(e,t){var n,o,r,i=this;if(n=this.url("events"),o=t,t=null,c.call(this,o))return"object"!==("undefined"==typeof e?"undefined":m(e))||e instanceof Array?void a.call(this,"First argument must be an object",o):arguments.length>2?void a.call(this,"Incorrect arguments provided to #recordEvents method",o):(this.config.globalProperties&&b(e,function(t,n){b(t,function(t,o){var r=i.config.globalProperties(n);e[n][o]=x(r,t)})}),r={},b(e,function(e,t){r[t]=r[t]||[],b(e,function(e,n){var o={};w.getExtendedEventBody(o,i.extensions.events),w.getExtendedEventBody(o,i.extensions.collections[t]),w.getExtendedEventBody(o,[e]),r[t].push(o)})}),this.emit("recordEvents",r),g.enabled?(p()&&f.call(this,"POST",n,r,o),t=o=null,this):(a.call(this,"Keen.enabled is set to false.",o),!1))}function i(){this.emit("error","This method has been deprecated. Check out #recordEvent: https://github.com/keen/keen-tracking.js#record-a-single-event"),o.apply(this,arguments)}function s(){this.emit("error","This method has been deprecated. Check out #recordEvents: https://github.com/keen/keen-tracking.js#record-multiple-events"),r.apply(this,arguments)}function c(e){var t=e;return e=null,this.projectId()?!!this.writeKey()||(a.call(this,"Keen.Client is missing a writeKey property.",t),!1):(a.call(this,"Keen.Client is missing a projectId property.",t),!1)}function a(e,t){var n="Event(s) not recorded: "+e;this.emit("error",n),t&&(t.call(this,n,null),t=null)}function u(){return"undefined"!=typeof window&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)?2e3:16e3}function l(e,t,n,o){p()?f.call(this,"POST",e,t,o):a.call(this,n)}function f(e,t,n,o){var r,i=this,s=p(),c=o;o=null,s.onreadystatechange=function(){var e;if(4==s.readyState)if(s.status>=200&&s.status<300){try{e=JSON.parse(s.responseText)}catch(e){g.emit("error","Could not parse HTTP response: "+s.responseText),c&&c.call(i,s,null)}c&&e&&c.call(i,null,e)}else g.emit("error","HTTP request failed."),c&&c.call(i,s,null)},s.open(e,t,!0),s.setRequestHeader("Authorization",i.writeKey()),s.setRequestHeader("Content-Type","application/json"),n&&(r=JSON.stringify(n)),"GET"===e.toUpperCase()&&s.send(),"POST"===e.toUpperCase()&&s.send(r)}function d(e){var t=p();t&&(t.open("GET",e,!1),t.send(null))}function p(){var e="undefined"==typeof window?this:window;if(e.XMLHttpRequest&&("file:"!=e.location.protocol||!e.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function h(e,t){function n(){i&&i.call(r,"An error occurred!",null)}function o(){window[u]=void 0;try{delete window[u]}catch(e){}a.removeChild(c)}var r=this,i=t,s=(new Date).getTime(),c=document.createElement("script"),a=document.getElementsByTagName("head")[0],u="keenJSONPCallback",l=!1;for(t=null,u+=s;u in window;)u+="a";window[u]=function(e){l!==!0&&(l=!0,i&&i.call(r,null,e),o())},c.src=e+"&jsonp="+u,a.appendChild(c),c.onreadystatechange=function(){l===!1&&"loaded"===this.readyState&&(l=!0,n(),o())},c.onerror=function(){l===!1&&(l=!0,n(),o())}}function y(e,t){var n=this,o=t,r=document.createElement("img"),i=!1;t=null,r.onload=function(){if(i=!0,"naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();o&&o.call(n)},r.onerror=function(){i=!0,o&&o.call(n,"An error occurred!",null)},r.src=e+"&c=clv1"}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(7),v=n(24),b=n(1),x=n(2),w=n(6);e.exports={recordEvent:o,recordEvents:r,addEvent:i,addEvents:s}},function(e,t,n){"use strict";e.exports=n(14)},function(e,t,n){"use strict";function o(e){if(arguments.length)return this instanceof o==!1?new o(e):(this.config={key:e,options:{expires:365}},this.data=this.get(),this)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(12),s=n(2);e.exports=o,o.prototype.get=function(e){var t={};return i.get(this.config.key)&&(t=i.getJSON(this.config.key)),e&&"object"===("undefined"==typeof t?"undefined":r(t))&&null!==typeof t?"undefined"!=typeof t[e]?t[e]:null:t},o.prototype.set=function(e,t){return arguments.length&&this.enabled()?("string"==typeof e&&2===arguments.length?this.data[e]=t?t:null:"object"===("undefined"==typeof e?"undefined":r(e))&&1===arguments.length&&s(this.data,e),i.set(this.config.key,this.data,this.config.options),this):this},o.prototype.expire=function(e){return e?i.set(this.config.key,this.data,s(this.config.options,{expires:e})):(i.remove(this.config.key),this.data={}),this},o.prototype.options=function(e){return arguments.length?(this.config.options="object"===("undefined"==typeof e?"undefined":r(e))?e:{},this):this.config.options},o.prototype.enabled=function(){return navigator.cookieEnabled}},function(e,t,n){"use strict";function o(e,t){document.addEventListener?document.addEventListener(e,t,!1):document.attachEvent("on"+e,t)}function r(e,t){for(var n=(e.parentNode||document).querySelectorAll(t)||[],o=n.length;o--;)if(n[o]==e)return!0;return!1}function i(e,t,n){var o,r,i=500;return void 0!==t.getAttribute?o=t.getAttribute("target"):t.target&&(o=t.target),r=n(e),"boolean"==typeof r&&r===!1||e.defaultPrevented||e.returnValue===!1?(e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1):("_blank"===o||"blank"===o||e.metaKey||(e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){window.location=t.href},i)),!1)}function s(e,t,n){var o=500,r=n(e);return"boolean"==typeof r&&r===!1||e.defaultPrevented||e.returnValue===!1?(e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1):(e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){t.submit()},o),!1)}var c=(n(3),n(1));e.exports=function(e){function t(e){if(e)return this instanceof t==!1?new t(e):(this.selector=e,this)}function n(t){return function(n){var o,a;o=n||window.event,a=o.target||o.srcElement,"undefined"!==e.domListeners[t]&&c(e.domListeners[t],function(e,n){r(a,n)?c(e,function(e,n){"click"===t&&"A"===a.nodeName?i(o,a,e):"submit"===t&&"FORM"===a.nodeName?s(o,a,e):e(o)}):"window"===n&&c(e,function(e,t){e(o)})})}}return e.domListeners=e.domListeners||{},t.prototype.on=function(t,r){var i=this;return 2!==arguments.length||"string"!=typeof t||"function"!=typeof r?this:("undefined"==typeof e.domListeners[t]&&(o(t,n(t)),e.domListeners[t]={}),e.domListeners[t][i.selector]=e.domListeners[t][i.selector]||[],e.domListeners[t][i.selector].push(r),i)},t.prototype.once=function(e,t){function n(){return o.off(e,n),t.apply(o,arguments)}var o=this;return n.fn=t,o.on(e,n),o},t.prototype.off=function(t,n){var o=this,r=[];if(2===arguments.length)c(e.domListeners[t][o.selector],function(e,t){e!==n&&e.fn!==n&&r.push(e)}),e.domListeners[t][o.selector]=r;else if(1===arguments.length)try{delete e.domListeners[t][o.selector]}catch(n){e.domListeners[t][o.selector]=[]}else c(e.domListeners,function(t,n){try{delete e.domListeners[n][o.selector]}catch(t){e.domListeners[n][o.selector]=function(){}}});return o},t}},function(e,t){"use strict";function n(e){return this instanceof n==!1?new n(e):(this.count=e||0,this)}e.exports=n,n.prototype.start=function(){var e=this;return this.pause(),this.interval=setInterval(function(){e.count++},1e3),this},n.prototype.pause=function(){return clearInterval(this.interval),this},n.prototype.value=function(){return this.count},n.prototype.clear=function(){return this.count=0,this}},function(e,t){"use strict";function n(e,t){"object"!=("undefined"==typeof t?"undefined":c(t))?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",o=t.serializer||(t.hash?i:s),r=e&&e.elements?e.elements:[],l=Object.create(null),f=0;f<r.length;++f){var d=r[f];if("password"!==d.type&&(t.disabled||!d.disabled)&&d.name&&u.test(d.nodeName)&&!a.test(d.type)){var p=d.name,h=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(h=void 0),t.empty){if("checkbox"!==d.type||d.checked||(h=""),"radio"===d.type&&(l[d.name]||d.checked?d.checked&&(l[d.name]=!0):l[d.name]=!1),void 0==h&&"radio"==d.type)continue}else if(!h)continue;if("select-multiple"!==d.type)n=o(n,p,h);else{h=[];for(var y=d.options,m=!1,g=0;g<y.length;++g){var v=y[g],b=t.empty&&!v.value,x=v.value||b;v.selected&&x&&(m=!0,n=t.hash&&"[]"!==p.slice(p.length-2)?o(n,p+"[]",v.value):o(n,p,v.value))}!m&&t.empty&&(n=o(n,p,""))}}}if(t.empty)for(var p in l)l[p]||(n=o(n,p,""));return n}function o(e){var t=[],n=/^([^\[\]]*)/,o=new RegExp(l),r=n.exec(e);for(r[1]&&t.push(r[1]);null!==(r=o.exec(e));)t.push(r[1]);return t}function r(e,t,n){if(0===t.length)return e=n;var o=t.shift(),i=o.match(/^\[(.+?)\]$/);if("[]"===o)return e=e||[],Array.isArray(e)?e.push(r(null,t,n)):(e._values=e._values||[],e._values.push(r(null,t,n))),e;if(i){var s=i[1],c=+s;isNaN(c)?(e=e||{},e[s]=r(e[s],t,n)):(e=e||[],e[c]=r(e[c],t,n))}else e[o]=r(e[o],t,n);return e}function i(e,t,n){var i=t.match(l);if(i){var s=o(t);r(e,s,n)}else{var c=e[t];c?(Array.isArray(c)||(e[t]=[c]),e[t].push(n)):e[t]=n}return e}function s(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=encodeURIComponent(n),n=n.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=/^(?:submit|button|image|reset|file)$/i,u=/^(?:input|select|textarea|keygen)/i,l=/(\[[^\[\]]*\])/g;e.exports=n},function(e,t){"use strict";e.exports=[{name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"geo"},{name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"tech"},{name:"keen:url_parser",input:{url:"url.full"},output:"url.info"},{name:"keen:url_parser",input:{url:"referrer.full"},output:"referrer.info"},{name:"keen:date_time_parser",input:{date_time:"keen.timestamp"},output:"time.utc"},{name:"keen:date_time_parser",input:{date_time:"local_time_full"},output:"time.local"}]},function(e,t){e.exports={name:"keen-web-autocollector",version:"1.0.8",description:"Web autocollector SDK for Keen IO.",main:"src/index.js",repository:{url:"https://github.com/keenlabs/keen-web-autocollector.git",type:"git"},author:"aroc <eric@ericanderson.ca>",license:"MIT",dependencies:{"babel-core":"^6.17.0","babel-loader":"^6.2.5","babel-plugin-transform-object-assign":"^6.8.0","babel-preset-es2015":"^6.16.0",chai:"^3.5.0","json-loader":"^0.5.4","keen-tracking":"^1.0.5",mocha:"^3.1.2","mocha-phantomjs":"^4.1.0",sinon:"^1.17.6",webpack:"^1.13.2"},scripts:{dev:"export NODE_ENV=development && rm -rf ./dist/* && webpack --colors -d --watch","serve-demo":"node serve-demo.js",test:"export NODE_ENV=test && mocha-phantomjs -R spec ./test/unit/index.html",build:"rm -rf ./dist/* && export NODE_ENV=development && webpack -d && export NODE_ENV=production && webpack -p && npm run test"},devDependencies:{express:"^4.14.0"}}}]);